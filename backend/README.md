[![Origin Tests](https://github.com/IlushinGL/express-mesto-gha/actions/workflows/tests-14-sprint.yml/badge.svg)](https://github.com/IlushinGL/express-mesto-gha/actions/workflows/tests-14-sprint.yml)

# ЯндексПрактикум 2023
### Mesto. Бэкенд. Сервер API
**Важно** 
* Сообщение о прохождении тестов связано с **источником**.
* Текущий код является последней успешной версией **источника**.
* [Cсылка на **источник** в Git](https://github.com/IlushinGL/express-mesto-gha)

### Автор: Григорий Илюшин

## Запуск проекта
После клонирования репозитория в структуре проекта должны быть:

`/routes` — папка с файлами роутера  
`/controllers` — папка с файлами контроллеров пользователя и карточки   
`/models` — папка с файлами описания схем пользователя и карточки  
`/middleware` — папка с промежуточными обработчиками  
`/utils` — папка с дополнительными файлами 

Установите зависимости:

```bash
npm install
```

`npm run start` — запускает сервер   
`npm run dev` — запускает сервер с hot-reload

## API
| Роут                   | Запрос    | Действие                                                                                                                                             | Ошибки                                                                                                                                                                                                                |
|------------------------| --------- |------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `/signup`              | `POST` | `POST`-запрос создаёт пользователя с переданными в теле запроса `name`, `about`, `avatar`, `email`, `password`                                       | `400` — Переданы некорректные данные при создании пользователя. `409` — Пользователь уже существует. `500` — Ошибка по умолчанию.                                                                                     |
| `/signin`              | `POST`   | `POST`-запрос создаёт JWT-токен для пользователя по переданным в теле запроса `email`, `password`                                              | `400` — Переданы некорректные данные при создании пользователя. `500` — Ошибка по умолчанию.                                                                                                                          |
| `/users`               | `GET POST` | `GET`-запрос возвращает всех пользователей из базы данных; `POST`-запрос создаёт пользователя с переданными в теле запроса `name`, `about`, `avatar` | `400` — Переданы некорректные данные при создании пользователя. `401` — Ошибка авторизации. `500` — Ошибка по умолчанию.                                                                                              |
| `/users/:userId`       | `GET`     | `GET`-запрос возвращает пользователя по переданному `_id`.                                                                                           | `404` — Пользователь по указанному `_id` не найден. `401` — Ошибка авторизации. `500` — Ошибка по умолчанию.                                                                                                          |
| `/users/me`            | `PATCH`   | `PATCH`-запрос обновляет информацию о текущем пользователе.                                                                                          | `400` — Переданы некорректные данные при обновлении профиля. `401` — Ошибка авторизации. `403` — Попытка редактирования чужого профиля. `404` — Пользователь с указанным `_id` не найден. `500` — Ошибка по умолчанию. |
| `/users/me/avatar`     | `PATCH`   | `PATCH`-запрос обновляет аватар пользователя.                                                                                                        | `400` — Переданы некорректные данные при обновлении аватара. `401` — Ошибка авторизации. `403` — Попытка редактирования чужого профиля. `404` — Пользователь с указанным `_id` не найден. `500` — Ошибка по умолчанию. |
| `/cards`               | `GET POST` | `GET`-запрос возвращает все карточки из базы данных. `POST`-запрос создает новую карточку по переданным параметрам.                                  | `400` — Переданы некорректные данные при создании карточки. `401` — Ошибка авторизации. `500` — Ошибка по умолчанию.                                                                                                  |
| `/cards/:cardId`       | `DELETE`  | `DELETE`-запрос удаляет карточку по `_id`.                                                                                                           | `401` — Ошибка авторизации. `404` — Карточка с указанным `_id` не найдена.                                                                                                                                            |
| `/cards/:cardId/likes` | `PUT DELETE` | `PUT`-запрос добавляет лайк карточке. `DELETE`-запрос удаляет лайк с карточки.                                                                       | `400` — Переданы некорректные данные для постановки/снятии лайка. `401` — Ошибка авторизации. `404` — Передан несуществующий `_id` карточки. `500` — Ошибка по умолчанию.                                             |
